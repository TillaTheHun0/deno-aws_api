// Autogenerated API client for: AWS Health APIs and Notifications

import type { ServiceClient, ApiFactory, ApiMetadata } from '../../client/common.ts';
interface RequestConfig {
  abortSignal?: AbortSignal;
}

import { JSONObject, JSONValue } from '../../encoding/json.ts';
import * as prt from "../../encoding/json.ts";

export default class Health {
  #client: ServiceClient;
  constructor(apiFactory: ApiFactory) {
    this.#client = apiFactory.buildServiceClient(Health.ApiMetadata);
  }

  static ApiMetadata: ApiMetadata = {
    "apiVersion": "2016-08-04",
    "endpointPrefix": "health",
    "jsonVersion": "1.1",
    "protocol": "json",
    "serviceAbbreviation": "AWSHealth",
    "serviceFullName": "AWS Health APIs and Notifications",
    "serviceId": "Health",
    "signatureVersion": "v4",
    "targetPrefix": "AWSHealth_20160804",
    "uid": "health-2016-08-04"
  };

  async describeAffectedAccountsForOrganization(
    {abortSignal, ...params}: RequestConfig & DescribeAffectedAccountsForOrganizationRequest,
  ): Promise<DescribeAffectedAccountsForOrganizationResponse> {
    const body: JSONObject = {...params,
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeAffectedAccountsForOrganization",
    });
    return prt.readObj({
      required: {},
      optional: {
        "affectedAccounts": ["s"],
        "eventScopeCode": toeventScopeCode,
        "nextToken": "s",
      },
    }, await resp.json());
  }

  async describeAffectedEntities(
    {abortSignal, ...params}: RequestConfig & DescribeAffectedEntitiesRequest,
  ): Promise<DescribeAffectedEntitiesResponse> {
    const body: JSONObject = {...params,
    filter: fromEntityFilter(params["filter"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeAffectedEntities",
    });
    return prt.readObj({
      required: {},
      optional: {
        "entities": [toAffectedEntity],
        "nextToken": "s",
      },
    }, await resp.json());
  }

  async describeAffectedEntitiesForOrganization(
    {abortSignal, ...params}: RequestConfig & DescribeAffectedEntitiesForOrganizationRequest,
  ): Promise<DescribeAffectedEntitiesForOrganizationResponse> {
    const body: JSONObject = {...params,
    organizationEntityFilters: params["organizationEntityFilters"]?.map(x => fromEventAccountFilter(x)),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeAffectedEntitiesForOrganization",
    });
    return prt.readObj({
      required: {},
      optional: {
        "entities": [toAffectedEntity],
        "failedSet": [toOrganizationAffectedEntitiesErrorItem],
        "nextToken": "s",
      },
    }, await resp.json());
  }

  async describeEntityAggregates(
    {abortSignal, ...params}: RequestConfig & DescribeEntityAggregatesRequest = {},
  ): Promise<DescribeEntityAggregatesResponse> {
    const body: JSONObject = {...params,
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeEntityAggregates",
    });
    return prt.readObj({
      required: {},
      optional: {
        "entityAggregates": [toEntityAggregate],
      },
    }, await resp.json());
  }

  async describeEventAggregates(
    {abortSignal, ...params}: RequestConfig & DescribeEventAggregatesRequest,
  ): Promise<DescribeEventAggregatesResponse> {
    const body: JSONObject = {...params,
    filter: fromEventFilter(params["filter"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeEventAggregates",
    });
    return prt.readObj({
      required: {},
      optional: {
        "eventAggregates": [toEventAggregate],
        "nextToken": "s",
      },
    }, await resp.json());
  }

  async describeEventDetails(
    {abortSignal, ...params}: RequestConfig & DescribeEventDetailsRequest,
  ): Promise<DescribeEventDetailsResponse> {
    const body: JSONObject = {...params,
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeEventDetails",
    });
    return prt.readObj({
      required: {},
      optional: {
        "successfulSet": [toEventDetails],
        "failedSet": [toEventDetailsErrorItem],
      },
    }, await resp.json());
  }

  async describeEventDetailsForOrganization(
    {abortSignal, ...params}: RequestConfig & DescribeEventDetailsForOrganizationRequest,
  ): Promise<DescribeEventDetailsForOrganizationResponse> {
    const body: JSONObject = {...params,
    organizationEventDetailFilters: params["organizationEventDetailFilters"]?.map(x => fromEventAccountFilter(x)),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeEventDetailsForOrganization",
    });
    return prt.readObj({
      required: {},
      optional: {
        "successfulSet": [toOrganizationEventDetails],
        "failedSet": [toOrganizationEventDetailsErrorItem],
      },
    }, await resp.json());
  }

  async describeEventTypes(
    {abortSignal, ...params}: RequestConfig & DescribeEventTypesRequest = {},
  ): Promise<DescribeEventTypesResponse> {
    const body: JSONObject = {...params,
    filter: fromEventTypeFilter(params["filter"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeEventTypes",
    });
    return prt.readObj({
      required: {},
      optional: {
        "eventTypes": [toEventType],
        "nextToken": "s",
      },
    }, await resp.json());
  }

  async describeEvents(
    {abortSignal, ...params}: RequestConfig & DescribeEventsRequest = {},
  ): Promise<DescribeEventsResponse> {
    const body: JSONObject = {...params,
    filter: fromEventFilter(params["filter"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeEvents",
    });
    return prt.readObj({
      required: {},
      optional: {
        "events": [toEvent],
        "nextToken": "s",
      },
    }, await resp.json());
  }

  async describeEventsForOrganization(
    {abortSignal, ...params}: RequestConfig & DescribeEventsForOrganizationRequest = {},
  ): Promise<DescribeEventsForOrganizationResponse> {
    const body: JSONObject = {...params,
    filter: fromOrganizationEventFilter(params["filter"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeEventsForOrganization",
    });
    return prt.readObj({
      required: {},
      optional: {
        "events": [toOrganizationEvent],
        "nextToken": "s",
      },
    }, await resp.json());
  }

  async describeHealthServiceStatusForOrganization(
    {abortSignal, ...params}: RequestConfig = {},
  ): Promise<DescribeHealthServiceStatusForOrganizationResponse> {
    const resp = await this.#client.performRequest({
      abortSignal,
      action: "DescribeHealthServiceStatusForOrganization",
    });
    return prt.readObj({
      required: {},
      optional: {
        "healthServiceAccessStatusForOrganization": "s",
      },
    }, await resp.json());
  }

  async disableHealthServiceAccessForOrganization(
    {abortSignal, ...params}: RequestConfig = {},
  ): Promise<void> {
    const resp = await this.#client.performRequest({
      abortSignal,
      action: "DisableHealthServiceAccessForOrganization",
    });
  }

  async enableHealthServiceAccessForOrganization(
    {abortSignal, ...params}: RequestConfig = {},
  ): Promise<void> {
    const resp = await this.#client.performRequest({
      abortSignal,
      action: "EnableHealthServiceAccessForOrganization",
    });
  }

}

// refs: 1 - tags: named, input
export interface DescribeAffectedAccountsForOrganizationRequest {
  eventArn: string;
  nextToken?: string | null;
  maxResults?: number | null;
}

// refs: 1 - tags: named, input
export interface DescribeAffectedEntitiesRequest {
  filter: EntityFilter;
  locale?: string | null;
  nextToken?: string | null;
  maxResults?: number | null;
}

// refs: 1 - tags: named, input
export interface DescribeAffectedEntitiesForOrganizationRequest {
  organizationEntityFilters: EventAccountFilter[];
  locale?: string | null;
  nextToken?: string | null;
  maxResults?: number | null;
}

// refs: 1 - tags: named, input
export interface DescribeEntityAggregatesRequest {
  eventArns?: string[] | null;
}

// refs: 1 - tags: named, input
export interface DescribeEventAggregatesRequest {
  filter?: EventFilter | null;
  aggregateField: eventAggregateField;
  maxResults?: number | null;
  nextToken?: string | null;
}

// refs: 1 - tags: named, input
export interface DescribeEventDetailsRequest {
  eventArns: string[];
  locale?: string | null;
}

// refs: 1 - tags: named, input
export interface DescribeEventDetailsForOrganizationRequest {
  organizationEventDetailFilters: EventAccountFilter[];
  locale?: string | null;
}

// refs: 1 - tags: named, input
export interface DescribeEventTypesRequest {
  filter?: EventTypeFilter | null;
  locale?: string | null;
  nextToken?: string | null;
  maxResults?: number | null;
}

// refs: 1 - tags: named, input
export interface DescribeEventsRequest {
  filter?: EventFilter | null;
  nextToken?: string | null;
  maxResults?: number | null;
  locale?: string | null;
}

// refs: 1 - tags: named, input
export interface DescribeEventsForOrganizationRequest {
  filter?: OrganizationEventFilter | null;
  nextToken?: string | null;
  maxResults?: number | null;
  locale?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeAffectedAccountsForOrganizationResponse {
  affectedAccounts?: string[] | null;
  eventScopeCode?: eventScopeCode | null;
  nextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeAffectedEntitiesResponse {
  entities?: AffectedEntity[] | null;
  nextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeAffectedEntitiesForOrganizationResponse {
  entities?: AffectedEntity[] | null;
  failedSet?: OrganizationAffectedEntitiesErrorItem[] | null;
  nextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeEntityAggregatesResponse {
  entityAggregates?: EntityAggregate[] | null;
}

// refs: 1 - tags: named, output
export interface DescribeEventAggregatesResponse {
  eventAggregates?: EventAggregate[] | null;
  nextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeEventDetailsResponse {
  successfulSet?: EventDetails[] | null;
  failedSet?: EventDetailsErrorItem[] | null;
}

// refs: 1 - tags: named, output
export interface DescribeEventDetailsForOrganizationResponse {
  successfulSet?: OrganizationEventDetails[] | null;
  failedSet?: OrganizationEventDetailsErrorItem[] | null;
}

// refs: 1 - tags: named, output
export interface DescribeEventTypesResponse {
  eventTypes?: EventType[] | null;
  nextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeEventsResponse {
  events?: Event[] | null;
  nextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeEventsForOrganizationResponse {
  events?: OrganizationEvent[] | null;
  nextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeHealthServiceStatusForOrganizationResponse {
  healthServiceAccessStatusForOrganization?: string | null;
}

// refs: 1 - tags: input, named, interface
export interface EntityFilter {
  eventArns: string[];
  entityArns?: string[] | null;
  entityValues?: string[] | null;
  lastUpdatedTimes?: DateTimeRange[] | null;
  tags?: ({ [key: string]: string })[] | null;
  statusCodes?: entityStatusCode[] | null;
}
function fromEntityFilter(input?: EntityFilter | null): JSONValue {
  if (!input) return input;
  return {...input,
    lastUpdatedTimes: input["lastUpdatedTimes"]?.map(x => fromDateTimeRange(x)),
  }
}

// refs: 10 - tags: input, named, interface
export interface DateTimeRange {
  from?: Date | number | null;
  to?: Date | number | null;
}
function fromDateTimeRange(input?: DateTimeRange | null): JSONValue {
  if (!input) return input;
  return {...input,
    from: prt.serializeDate_unixTimestamp(input["from"]),
    to: prt.serializeDate_unixTimestamp(input["to"]),
  }
}

// refs: 3 - tags: input, named, enum, output
export type entityStatusCode =
| "IMPAIRED"
| "UNIMPAIRED"
| "UNKNOWN"
;

function toentityStatusCode(root: JSONValue): entityStatusCode | null {
  return ( false
    || root == "IMPAIRED"
    || root == "UNIMPAIRED"
    || root == "UNKNOWN"
  ) ? root : null;
}

// refs: 2 - tags: input, named, interface
export interface EventAccountFilter {
  eventArn: string;
  awsAccountId?: string | null;
}
function fromEventAccountFilter(input?: EventAccountFilter | null): JSONValue {
  if (!input) return input;
  return {...input,
  }
}

// refs: 2 - tags: input, named, interface
export interface EventFilter {
  eventArns?: string[] | null;
  eventTypeCodes?: string[] | null;
  services?: string[] | null;
  regions?: string[] | null;
  availabilityZones?: string[] | null;
  startTimes?: DateTimeRange[] | null;
  endTimes?: DateTimeRange[] | null;
  lastUpdatedTimes?: DateTimeRange[] | null;
  entityArns?: string[] | null;
  entityValues?: string[] | null;
  eventTypeCategories?: eventTypeCategory[] | null;
  tags?: ({ [key: string]: string })[] | null;
  eventStatusCodes?: eventStatusCode[] | null;
}
function fromEventFilter(input?: EventFilter | null): JSONValue {
  if (!input) return input;
  return {...input,
    startTimes: input["startTimes"]?.map(x => fromDateTimeRange(x)),
    endTimes: input["endTimes"]?.map(x => fromDateTimeRange(x)),
    lastUpdatedTimes: input["lastUpdatedTimes"]?.map(x => fromDateTimeRange(x)),
  }
}

// refs: 9 - tags: input, named, enum, output
export type eventTypeCategory =
| "issue"
| "accountNotification"
| "scheduledChange"
| "investigation"
;

function toeventTypeCategory(root: JSONValue): eventTypeCategory | null {
  return ( false
    || root == "issue"
    || root == "accountNotification"
    || root == "scheduledChange"
    || root == "investigation"
  ) ? root : null;
}

// refs: 7 - tags: input, named, enum, output
export type eventStatusCode =
| "open"
| "closed"
| "upcoming"
;

function toeventStatusCode(root: JSONValue): eventStatusCode | null {
  return ( false
    || root == "open"
    || root == "closed"
    || root == "upcoming"
  ) ? root : null;
}

// refs: 1 - tags: input, named, enum
export type eventAggregateField =
| "eventTypeCategory"
;


// refs: 1 - tags: input, named, interface
export interface EventTypeFilter {
  eventTypeCodes?: string[] | null;
  services?: string[] | null;
  eventTypeCategories?: eventTypeCategory[] | null;
}
function fromEventTypeFilter(input?: EventTypeFilter | null): JSONValue {
  if (!input) return input;
  return {...input,
  }
}

// refs: 1 - tags: input, named, interface
export interface OrganizationEventFilter {
  eventTypeCodes?: string[] | null;
  awsAccountIds?: string[] | null;
  services?: string[] | null;
  regions?: string[] | null;
  startTime?: DateTimeRange | null;
  endTime?: DateTimeRange | null;
  lastUpdatedTime?: DateTimeRange | null;
  entityArns?: string[] | null;
  entityValues?: string[] | null;
  eventTypeCategories?: eventTypeCategory[] | null;
  eventStatusCodes?: eventStatusCode[] | null;
}
function fromOrganizationEventFilter(input?: OrganizationEventFilter | null): JSONValue {
  if (!input) return input;
  return {...input,
    startTime: fromDateTimeRange(input["startTime"]),
    endTime: fromDateTimeRange(input["endTime"]),
    lastUpdatedTime: fromDateTimeRange(input["lastUpdatedTime"]),
  }
}

// refs: 5 - tags: output, named, enum
export type eventScopeCode =
| "PUBLIC"
| "ACCOUNT_SPECIFIC"
| "NONE"
;
function toeventScopeCode(root: JSONValue): eventScopeCode | null {
  return ( false
    || root == "PUBLIC"
    || root == "ACCOUNT_SPECIFIC"
    || root == "NONE"
  ) ? root : null;
}

// refs: 2 - tags: output, named, interface
export interface AffectedEntity {
  entityArn?: string | null;
  eventArn?: string | null;
  entityValue?: string | null;
  entityUrl?: string | null;
  awsAccountId?: string | null;
  lastUpdatedTime?: Date | number | null;
  statusCode?: entityStatusCode | null;
  tags?: { [key: string]: string } | null;
}
function toAffectedEntity(root: JSONValue): AffectedEntity {
  return prt.readObj({
    required: {},
    optional: {
      "entityArn": "s",
      "eventArn": "s",
      "entityValue": "s",
      "entityUrl": "s",
      "awsAccountId": "s",
      "lastUpdatedTime": "d",
      "statusCode": toentityStatusCode,
      "tags": x => prt.readMap(String, String, x),
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface OrganizationAffectedEntitiesErrorItem {
  awsAccountId?: string | null;
  eventArn?: string | null;
  errorName?: string | null;
  errorMessage?: string | null;
}
function toOrganizationAffectedEntitiesErrorItem(root: JSONValue): OrganizationAffectedEntitiesErrorItem {
  return prt.readObj({
    required: {},
    optional: {
      "awsAccountId": "s",
      "eventArn": "s",
      "errorName": "s",
      "errorMessage": "s",
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface EntityAggregate {
  eventArn?: string | null;
  count?: number | null;
}
function toEntityAggregate(root: JSONValue): EntityAggregate {
  return prt.readObj({
    required: {},
    optional: {
      "eventArn": "s",
      "count": "n",
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface EventAggregate {
  aggregateValue?: string | null;
  count?: number | null;
}
function toEventAggregate(root: JSONValue): EventAggregate {
  return prt.readObj({
    required: {},
    optional: {
      "aggregateValue": "s",
      "count": "n",
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface EventDetails {
  event?: Event | null;
  eventDescription?: EventDescription | null;
  eventMetadata?: { [key: string]: string } | null;
}
function toEventDetails(root: JSONValue): EventDetails {
  return prt.readObj({
    required: {},
    optional: {
      "event": toEvent,
      "eventDescription": toEventDescription,
      "eventMetadata": x => prt.readMap(String, String, x),
    },
  }, root);
}

// refs: 3 - tags: output, named, interface
export interface Event {
  arn?: string | null;
  service?: string | null;
  eventTypeCode?: string | null;
  eventTypeCategory?: eventTypeCategory | null;
  region?: string | null;
  availabilityZone?: string | null;
  startTime?: Date | number | null;
  endTime?: Date | number | null;
  lastUpdatedTime?: Date | number | null;
  statusCode?: eventStatusCode | null;
  eventScopeCode?: eventScopeCode | null;
}
function toEvent(root: JSONValue): Event {
  return prt.readObj({
    required: {},
    optional: {
      "arn": "s",
      "service": "s",
      "eventTypeCode": "s",
      "eventTypeCategory": toeventTypeCategory,
      "region": "s",
      "availabilityZone": "s",
      "startTime": "d",
      "endTime": "d",
      "lastUpdatedTime": "d",
      "statusCode": toeventStatusCode,
      "eventScopeCode": toeventScopeCode,
    },
  }, root);
}

// refs: 2 - tags: output, named, interface
export interface EventDescription {
  latestDescription?: string | null;
}
function toEventDescription(root: JSONValue): EventDescription {
  return prt.readObj({
    required: {},
    optional: {
      "latestDescription": "s",
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface EventDetailsErrorItem {
  eventArn?: string | null;
  errorName?: string | null;
  errorMessage?: string | null;
}
function toEventDetailsErrorItem(root: JSONValue): EventDetailsErrorItem {
  return prt.readObj({
    required: {},
    optional: {
      "eventArn": "s",
      "errorName": "s",
      "errorMessage": "s",
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface OrganizationEventDetails {
  awsAccountId?: string | null;
  event?: Event | null;
  eventDescription?: EventDescription | null;
  eventMetadata?: { [key: string]: string } | null;
}
function toOrganizationEventDetails(root: JSONValue): OrganizationEventDetails {
  return prt.readObj({
    required: {},
    optional: {
      "awsAccountId": "s",
      "event": toEvent,
      "eventDescription": toEventDescription,
      "eventMetadata": x => prt.readMap(String, String, x),
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface OrganizationEventDetailsErrorItem {
  awsAccountId?: string | null;
  eventArn?: string | null;
  errorName?: string | null;
  errorMessage?: string | null;
}
function toOrganizationEventDetailsErrorItem(root: JSONValue): OrganizationEventDetailsErrorItem {
  return prt.readObj({
    required: {},
    optional: {
      "awsAccountId": "s",
      "eventArn": "s",
      "errorName": "s",
      "errorMessage": "s",
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface EventType {
  service?: string | null;
  code?: string | null;
  category?: eventTypeCategory | null;
}
function toEventType(root: JSONValue): EventType {
  return prt.readObj({
    required: {},
    optional: {
      "service": "s",
      "code": "s",
      "category": toeventTypeCategory,
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface OrganizationEvent {
  arn?: string | null;
  service?: string | null;
  eventTypeCode?: string | null;
  eventTypeCategory?: eventTypeCategory | null;
  eventScopeCode?: eventScopeCode | null;
  region?: string | null;
  startTime?: Date | number | null;
  endTime?: Date | number | null;
  lastUpdatedTime?: Date | number | null;
  statusCode?: eventStatusCode | null;
}
function toOrganizationEvent(root: JSONValue): OrganizationEvent {
  return prt.readObj({
    required: {},
    optional: {
      "arn": "s",
      "service": "s",
      "eventTypeCode": "s",
      "eventTypeCategory": toeventTypeCategory,
      "eventScopeCode": toeventScopeCode,
      "region": "s",
      "startTime": "d",
      "endTime": "d",
      "lastUpdatedTime": "d",
      "statusCode": toeventStatusCode,
    },
  }, root);
}
