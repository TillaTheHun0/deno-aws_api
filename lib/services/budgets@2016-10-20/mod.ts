// Autogenerated API client for: AWS Budgets

import type { ServiceClient, ApiFactory, ApiMetadata } from '../../client/common.ts';
interface RequestConfig {
  abortSignal?: AbortSignal;
}

import { JSONObject, JSONValue } from '../../encoding/json.ts';
import * as prt from "../../encoding/json.ts";

export default class Budgets {
  #client: ServiceClient;
  constructor(apiFactory: ApiFactory) {
    this.#client = apiFactory.buildServiceClient(Budgets.ApiMetadata);
  }

  static ApiMetadata: ApiMetadata = {
    "apiVersion": "2016-10-20",
    "endpointPrefix": "budgets",
    "jsonVersion": "1.1",
    "protocol": "json",
    "serviceAbbreviation": "AWSBudgets",
    "serviceFullName": "AWS Budgets",
    "serviceId": "Budgets",
    "signatureVersion": "v4",
    "targetPrefix": "AWSBudgetServiceGateway",
    "uid": "budgets-2016-10-20"
  };

  async createBudget(
    {abortSignal, ...params}: RequestConfig & CreateBudgetRequest,
  ): Promise<CreateBudgetResponse> {
    const body: JSONObject = {...params,
    Budget: fromBudget(params["Budget"]),
    NotificationsWithSubscribers: params["NotificationsWithSubscribers"]?.map(x => fromNotificationWithSubscribers(x)),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "CreateBudget",
    });
    return prt.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async createNotification(
    {abortSignal, ...params}: RequestConfig & CreateNotificationRequest,
  ): Promise<CreateNotificationResponse> {
    const body: JSONObject = {...params,
    Notification: fromNotification(params["Notification"]),
    Subscribers: params["Subscribers"]?.map(x => fromSubscriber(x)),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "CreateNotification",
    });
    return prt.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async createSubscriber(
    {abortSignal, ...params}: RequestConfig & CreateSubscriberRequest,
  ): Promise<CreateSubscriberResponse> {
    const body: JSONObject = {...params,
    Notification: fromNotification(params["Notification"]),
    Subscriber: fromSubscriber(params["Subscriber"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "CreateSubscriber",
    });
    return prt.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async deleteBudget(
    {abortSignal, ...params}: RequestConfig & DeleteBudgetRequest,
  ): Promise<DeleteBudgetResponse> {
    const body: JSONObject = {...params,
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DeleteBudget",
    });
    return prt.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async deleteNotification(
    {abortSignal, ...params}: RequestConfig & DeleteNotificationRequest,
  ): Promise<DeleteNotificationResponse> {
    const body: JSONObject = {...params,
    Notification: fromNotification(params["Notification"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DeleteNotification",
    });
    return prt.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async deleteSubscriber(
    {abortSignal, ...params}: RequestConfig & DeleteSubscriberRequest,
  ): Promise<DeleteSubscriberResponse> {
    const body: JSONObject = {...params,
    Notification: fromNotification(params["Notification"]),
    Subscriber: fromSubscriber(params["Subscriber"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DeleteSubscriber",
    });
    return prt.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async describeBudget(
    {abortSignal, ...params}: RequestConfig & DescribeBudgetRequest,
  ): Promise<DescribeBudgetResponse> {
    const body: JSONObject = {...params,
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeBudget",
    });
    return prt.readObj({
      required: {},
      optional: {
        "Budget": toBudget,
      },
    }, await resp.json());
  }

  async describeBudgetPerformanceHistory(
    {abortSignal, ...params}: RequestConfig & DescribeBudgetPerformanceHistoryRequest,
  ): Promise<DescribeBudgetPerformanceHistoryResponse> {
    const body: JSONObject = {...params,
    TimePeriod: fromTimePeriod(params["TimePeriod"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeBudgetPerformanceHistory",
    });
    return prt.readObj({
      required: {},
      optional: {
        "BudgetPerformanceHistory": toBudgetPerformanceHistory,
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async describeBudgets(
    {abortSignal, ...params}: RequestConfig & DescribeBudgetsRequest,
  ): Promise<DescribeBudgetsResponse> {
    const body: JSONObject = {...params,
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeBudgets",
    });
    return prt.readObj({
      required: {},
      optional: {
        "Budgets": [toBudget],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async describeNotificationsForBudget(
    {abortSignal, ...params}: RequestConfig & DescribeNotificationsForBudgetRequest,
  ): Promise<DescribeNotificationsForBudgetResponse> {
    const body: JSONObject = {...params,
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeNotificationsForBudget",
    });
    return prt.readObj({
      required: {},
      optional: {
        "Notifications": [toNotification],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async describeSubscribersForNotification(
    {abortSignal, ...params}: RequestConfig & DescribeSubscribersForNotificationRequest,
  ): Promise<DescribeSubscribersForNotificationResponse> {
    const body: JSONObject = {...params,
    Notification: fromNotification(params["Notification"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeSubscribersForNotification",
    });
    return prt.readObj({
      required: {},
      optional: {
        "Subscribers": [toSubscriber],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async updateBudget(
    {abortSignal, ...params}: RequestConfig & UpdateBudgetRequest,
  ): Promise<UpdateBudgetResponse> {
    const body: JSONObject = {...params,
    NewBudget: fromBudget(params["NewBudget"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "UpdateBudget",
    });
    return prt.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async updateNotification(
    {abortSignal, ...params}: RequestConfig & UpdateNotificationRequest,
  ): Promise<UpdateNotificationResponse> {
    const body: JSONObject = {...params,
    OldNotification: fromNotification(params["OldNotification"]),
    NewNotification: fromNotification(params["NewNotification"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "UpdateNotification",
    });
    return prt.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async updateSubscriber(
    {abortSignal, ...params}: RequestConfig & UpdateSubscriberRequest,
  ): Promise<UpdateSubscriberResponse> {
    const body: JSONObject = {...params,
    Notification: fromNotification(params["Notification"]),
    OldSubscriber: fromSubscriber(params["OldSubscriber"]),
    NewSubscriber: fromSubscriber(params["NewSubscriber"]),
  };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "UpdateSubscriber",
    });
    return prt.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

}

// refs: 1 - tags: named, input
export interface CreateBudgetRequest {
  AccountId: string;
  Budget: Budget;
  NotificationsWithSubscribers?: NotificationWithSubscribers[] | null;
}

// refs: 1 - tags: named, input
export interface CreateNotificationRequest {
  AccountId: string;
  BudgetName: string;
  Notification: Notification;
  Subscribers: Subscriber[];
}

// refs: 1 - tags: named, input
export interface CreateSubscriberRequest {
  AccountId: string;
  BudgetName: string;
  Notification: Notification;
  Subscriber: Subscriber;
}

// refs: 1 - tags: named, input
export interface DeleteBudgetRequest {
  AccountId: string;
  BudgetName: string;
}

// refs: 1 - tags: named, input
export interface DeleteNotificationRequest {
  AccountId: string;
  BudgetName: string;
  Notification: Notification;
}

// refs: 1 - tags: named, input
export interface DeleteSubscriberRequest {
  AccountId: string;
  BudgetName: string;
  Notification: Notification;
  Subscriber: Subscriber;
}

// refs: 1 - tags: named, input
export interface DescribeBudgetRequest {
  AccountId: string;
  BudgetName: string;
}

// refs: 1 - tags: named, input
export interface DescribeBudgetPerformanceHistoryRequest {
  AccountId: string;
  BudgetName: string;
  TimePeriod?: TimePeriod | null;
  MaxResults?: number | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, input
export interface DescribeBudgetsRequest {
  AccountId: string;
  MaxResults?: number | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, input
export interface DescribeNotificationsForBudgetRequest {
  AccountId: string;
  BudgetName: string;
  MaxResults?: number | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, input
export interface DescribeSubscribersForNotificationRequest {
  AccountId: string;
  BudgetName: string;
  Notification: Notification;
  MaxResults?: number | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, input
export interface UpdateBudgetRequest {
  AccountId: string;
  NewBudget: Budget;
}

// refs: 1 - tags: named, input
export interface UpdateNotificationRequest {
  AccountId: string;
  BudgetName: string;
  OldNotification: Notification;
  NewNotification: Notification;
}

// refs: 1 - tags: named, input
export interface UpdateSubscriberRequest {
  AccountId: string;
  BudgetName: string;
  Notification: Notification;
  OldSubscriber: Subscriber;
  NewSubscriber: Subscriber;
}

// refs: 1 - tags: named, output
export interface CreateBudgetResponse {
}

// refs: 1 - tags: named, output
export interface CreateNotificationResponse {
}

// refs: 1 - tags: named, output
export interface CreateSubscriberResponse {
}

// refs: 1 - tags: named, output
export interface DeleteBudgetResponse {
}

// refs: 1 - tags: named, output
export interface DeleteNotificationResponse {
}

// refs: 1 - tags: named, output
export interface DeleteSubscriberResponse {
}

// refs: 1 - tags: named, output
export interface DescribeBudgetResponse {
  Budget?: Budget | null;
}

// refs: 1 - tags: named, output
export interface DescribeBudgetPerformanceHistoryResponse {
  BudgetPerformanceHistory?: BudgetPerformanceHistory | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeBudgetsResponse {
  Budgets?: Budget[] | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeNotificationsForBudgetResponse {
  Notifications?: Notification[] | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface DescribeSubscribersForNotificationResponse {
  Subscribers?: Subscriber[] | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface UpdateBudgetResponse {
}

// refs: 1 - tags: named, output
export interface UpdateNotificationResponse {
}

// refs: 1 - tags: named, output
export interface UpdateSubscriberResponse {
}

// refs: 4 - tags: input, named, interface, output
export interface Budget {
  BudgetName: string;
  BudgetLimit?: Spend | null;
  PlannedBudgetLimits?: { [key: string]: Spend } | null;
  CostFilters?: { [key: string]: string[] } | null;
  CostTypes?: CostTypes | null;
  TimeUnit: TimeUnit;
  TimePeriod?: TimePeriod | null;
  CalculatedSpend?: CalculatedSpend | null;
  BudgetType: BudgetType;
  LastUpdatedTime?: Date | number | null;
}
function fromBudget(input?: Budget | null): JSONValue {
  if (!input) return input;
  return {...input,
    BudgetLimit: fromSpend(input["BudgetLimit"]),
    PlannedBudgetLimits: prt.serializeMap(input["PlannedBudgetLimits"], x => fromSpend(x)),
    CostTypes: fromCostTypes(input["CostTypes"]),
    TimePeriod: fromTimePeriod(input["TimePeriod"]),
    CalculatedSpend: fromCalculatedSpend(input["CalculatedSpend"]),
    LastUpdatedTime: prt.serializeDate_unixTimestamp(input["LastUpdatedTime"]),
  }
}
function toBudget(root: JSONValue): Budget {
  return prt.readObj({
    required: {
      "BudgetName": "s",
      "TimeUnit": toTimeUnit,
      "BudgetType": toBudgetType,
    },
    optional: {
      "BudgetLimit": toSpend,
      "PlannedBudgetLimits": x => prt.readMap(String, toSpend, x),
      "CostFilters": x => prt.readMap(String, l => Array.isArray(l) ? l.map(String) : [], x),
      "CostTypes": toCostTypes,
      "TimePeriod": toTimePeriod,
      "CalculatedSpend": toCalculatedSpend,
      "LastUpdatedTime": "d",
    },
  }, root);
}

// refs: 18 - tags: input, named, interface, output
export interface Spend {
  Amount: string;
  Unit: string;
}
function fromSpend(input?: Spend | null): JSONValue {
  if (!input) return input;
  return {...input,
  }
}
function toSpend(root: JSONValue): Spend {
  return prt.readObj({
    required: {
      "Amount": "s",
      "Unit": "s",
    },
    optional: {},
  }, root);
}

// refs: 5 - tags: input, named, interface, output
export interface CostTypes {
  IncludeTax?: boolean | null;
  IncludeSubscription?: boolean | null;
  UseBlended?: boolean | null;
  IncludeRefund?: boolean | null;
  IncludeCredit?: boolean | null;
  IncludeUpfront?: boolean | null;
  IncludeRecurring?: boolean | null;
  IncludeOtherSubscription?: boolean | null;
  IncludeSupport?: boolean | null;
  IncludeDiscount?: boolean | null;
  UseAmortized?: boolean | null;
}
function fromCostTypes(input?: CostTypes | null): JSONValue {
  if (!input) return input;
  return {...input,
  }
}
function toCostTypes(root: JSONValue): CostTypes {
  return prt.readObj({
    required: {},
    optional: {
      "IncludeTax": "b",
      "IncludeSubscription": "b",
      "UseBlended": "b",
      "IncludeRefund": "b",
      "IncludeCredit": "b",
      "IncludeUpfront": "b",
      "IncludeRecurring": "b",
      "IncludeOtherSubscription": "b",
      "IncludeSupport": "b",
      "IncludeDiscount": "b",
      "UseAmortized": "b",
    },
  }, root);
}

// refs: 5 - tags: input, named, enum, output
export type TimeUnit =
| "DAILY"
| "MONTHLY"
| "QUARTERLY"
| "ANNUALLY"
;

function toTimeUnit(root: JSONValue): TimeUnit | null {
  return ( false
    || root == "DAILY"
    || root == "MONTHLY"
    || root == "QUARTERLY"
    || root == "ANNUALLY"
  ) ? root : null;
}

// refs: 6 - tags: input, named, interface, output
export interface TimePeriod {
  Start?: Date | number | null;
  End?: Date | number | null;
}
function fromTimePeriod(input?: TimePeriod | null): JSONValue {
  if (!input) return input;
  return {...input,
    Start: prt.serializeDate_unixTimestamp(input["Start"]),
    End: prt.serializeDate_unixTimestamp(input["End"]),
  }
}
function toTimePeriod(root: JSONValue): TimePeriod {
  return prt.readObj({
    required: {},
    optional: {
      "Start": "d",
      "End": "d",
    },
  }, root);
}

// refs: 4 - tags: input, named, interface, output
export interface CalculatedSpend {
  ActualSpend: Spend;
  ForecastedSpend?: Spend | null;
}
function fromCalculatedSpend(input?: CalculatedSpend | null): JSONValue {
  if (!input) return input;
  return {...input,
    ActualSpend: fromSpend(input["ActualSpend"]),
    ForecastedSpend: fromSpend(input["ForecastedSpend"]),
  }
}
function toCalculatedSpend(root: JSONValue): CalculatedSpend {
  return prt.readObj({
    required: {
      "ActualSpend": toSpend,
    },
    optional: {
      "ForecastedSpend": toSpend,
    },
  }, root);
}

// refs: 5 - tags: input, named, enum, output
export type BudgetType =
| "USAGE"
| "COST"
| "RI_UTILIZATION"
| "RI_COVERAGE"
| "SAVINGS_PLANS_UTILIZATION"
| "SAVINGS_PLANS_COVERAGE"
;

function toBudgetType(root: JSONValue): BudgetType | null {
  return ( false
    || root == "USAGE"
    || root == "COST"
    || root == "RI_UTILIZATION"
    || root == "RI_COVERAGE"
    || root == "SAVINGS_PLANS_UTILIZATION"
    || root == "SAVINGS_PLANS_COVERAGE"
  ) ? root : null;
}

// refs: 1 - tags: input, named, interface
export interface NotificationWithSubscribers {
  Notification: Notification;
  Subscribers: Subscriber[];
}
function fromNotificationWithSubscribers(input?: NotificationWithSubscribers | null): JSONValue {
  if (!input) return input;
  return {...input,
    Notification: fromNotification(input["Notification"]),
    Subscribers: input["Subscribers"]?.map(x => fromSubscriber(x)),
  }
}

// refs: 10 - tags: input, named, interface, output
export interface Notification {
  NotificationType: NotificationType;
  ComparisonOperator: ComparisonOperator;
  Threshold: number;
  ThresholdType?: ThresholdType | null;
  NotificationState?: NotificationState | null;
}
function fromNotification(input?: Notification | null): JSONValue {
  if (!input) return input;
  return {...input,
  }
}
function toNotification(root: JSONValue): Notification {
  return prt.readObj({
    required: {
      "NotificationType": toNotificationType,
      "ComparisonOperator": toComparisonOperator,
      "Threshold": "n",
    },
    optional: {
      "ThresholdType": toThresholdType,
      "NotificationState": toNotificationState,
    },
  }, root);
}

// refs: 10 - tags: input, named, enum, output
export type NotificationType =
| "ACTUAL"
| "FORECASTED"
;

function toNotificationType(root: JSONValue): NotificationType | null {
  return ( false
    || root == "ACTUAL"
    || root == "FORECASTED"
  ) ? root : null;
}

// refs: 10 - tags: input, named, enum, output
export type ComparisonOperator =
| "GREATER_THAN"
| "LESS_THAN"
| "EQUAL_TO"
;

function toComparisonOperator(root: JSONValue): ComparisonOperator | null {
  return ( false
    || root == "GREATER_THAN"
    || root == "LESS_THAN"
    || root == "EQUAL_TO"
  ) ? root : null;
}

// refs: 10 - tags: input, named, enum, output
export type ThresholdType =
| "PERCENTAGE"
| "ABSOLUTE_VALUE"
;

function toThresholdType(root: JSONValue): ThresholdType | null {
  return ( false
    || root == "PERCENTAGE"
    || root == "ABSOLUTE_VALUE"
  ) ? root : null;
}

// refs: 10 - tags: input, named, enum, output
export type NotificationState =
| "OK"
| "ALARM"
;

function toNotificationState(root: JSONValue): NotificationState | null {
  return ( false
    || root == "OK"
    || root == "ALARM"
  ) ? root : null;
}

// refs: 7 - tags: input, named, interface, output
export interface Subscriber {
  SubscriptionType: SubscriptionType;
  Address: string;
}
function fromSubscriber(input?: Subscriber | null): JSONValue {
  if (!input) return input;
  return {...input,
  }
}
function toSubscriber(root: JSONValue): Subscriber {
  return prt.readObj({
    required: {
      "SubscriptionType": toSubscriptionType,
      "Address": "s",
    },
    optional: {},
  }, root);
}

// refs: 7 - tags: input, named, enum, output
export type SubscriptionType =
| "SNS"
| "EMAIL"
;

function toSubscriptionType(root: JSONValue): SubscriptionType | null {
  return ( false
    || root == "SNS"
    || root == "EMAIL"
  ) ? root : null;
}

// refs: 1 - tags: output, named, interface
export interface BudgetPerformanceHistory {
  BudgetName?: string | null;
  BudgetType?: BudgetType | null;
  CostFilters?: { [key: string]: string[] } | null;
  CostTypes?: CostTypes | null;
  TimeUnit?: TimeUnit | null;
  BudgetedAndActualAmountsList?: BudgetedAndActualAmounts[] | null;
}
function toBudgetPerformanceHistory(root: JSONValue): BudgetPerformanceHistory {
  return prt.readObj({
    required: {},
    optional: {
      "BudgetName": "s",
      "BudgetType": toBudgetType,
      "CostFilters": x => prt.readMap(String, l => Array.isArray(l) ? l.map(String) : [], x),
      "CostTypes": toCostTypes,
      "TimeUnit": toTimeUnit,
      "BudgetedAndActualAmountsList": [toBudgetedAndActualAmounts],
    },
  }, root);
}

// refs: 1 - tags: output, named, interface
export interface BudgetedAndActualAmounts {
  BudgetedAmount?: Spend | null;
  ActualAmount?: Spend | null;
  TimePeriod?: TimePeriod | null;
}
function toBudgetedAndActualAmounts(root: JSONValue): BudgetedAndActualAmounts {
  return prt.readObj({
    required: {},
    optional: {
      "BudgetedAmount": toSpend,
      "ActualAmount": toSpend,
      "TimePeriod": toTimePeriod,
    },
  }, root);
}
