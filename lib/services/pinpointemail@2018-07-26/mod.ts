// Autogenerated API client for: Amazon Pinpoint Email Service

interface RequestConfig {
  abortSignal?: AbortSignal;
}

import * as cmnP from "../../encoding/common.ts";
import * as client from "../../client/common.ts";
import type * as s from "./structs.ts";
import * as jsonP from "../../encoding/json.ts";

export default class PinpointEmail {
  #client: client.ServiceClient;
  constructor(apiFactory: client.ApiFactory) {
    this.#client = apiFactory.buildServiceClient(PinpointEmail.ApiMetadata);
  }

  static ApiMetadata: client.ApiMetadata = {
    "apiVersion": "2018-07-26",
    "endpointPrefix": "email",
    "jsonVersion": "1.1",
    "protocol": "rest-json",
    "serviceAbbreviation": "Pinpoint Email",
    "serviceFullName": "Amazon Pinpoint Email Service",
    "serviceId": "Pinpoint Email",
    "signatureVersion": "v4",
    "signingName": "ses",
    "uid": "pinpoint-email-2018-07-26"
  };

  async createConfigurationSet(
    {abortSignal, ...params}: RequestConfig & s.CreateConfigurationSetRequest,
  ): Promise<s.CreateConfigurationSetResponse> {
    const body: jsonP.JSONObject = {
      ConfigurationSetName: params["ConfigurationSetName"],
      TrackingOptions: fromTrackingOptions(params["TrackingOptions"]),
      DeliveryOptions: fromDeliveryOptions(params["DeliveryOptions"]),
      ReputationOptions: fromReputationOptions(params["ReputationOptions"]),
      SendingOptions: fromSendingOptions(params["SendingOptions"]),
      Tags: params["Tags"]?.map(x => fromTag(x)),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "CreateConfigurationSet",
      requestUri: "/v1/email/configuration-sets",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async createConfigurationSetEventDestination(
    {abortSignal, ...params}: RequestConfig & s.CreateConfigurationSetEventDestinationRequest,
  ): Promise<s.CreateConfigurationSetEventDestinationResponse> {
    const body: jsonP.JSONObject = {
      EventDestinationName: params["EventDestinationName"],
      EventDestination: fromEventDestinationDefinition(params["EventDestination"]),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "CreateConfigurationSetEventDestination",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}/event-destinations`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async createDedicatedIpPool(
    {abortSignal, ...params}: RequestConfig & s.CreateDedicatedIpPoolRequest,
  ): Promise<s.CreateDedicatedIpPoolResponse> {
    const body: jsonP.JSONObject = {
      PoolName: params["PoolName"],
      Tags: params["Tags"]?.map(x => fromTag(x)),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "CreateDedicatedIpPool",
      requestUri: "/v1/email/dedicated-ip-pools",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async createDeliverabilityTestReport(
    {abortSignal, ...params}: RequestConfig & s.CreateDeliverabilityTestReportRequest,
  ): Promise<s.CreateDeliverabilityTestReportResponse> {
    const body: jsonP.JSONObject = {
      ReportName: params["ReportName"],
      FromEmailAddress: params["FromEmailAddress"],
      Content: fromEmailContent(params["Content"]),
      Tags: params["Tags"]?.map(x => fromTag(x)),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "CreateDeliverabilityTestReport",
      requestUri: "/v1/email/deliverability-dashboard/test",
    });
    return jsonP.readObj({
      required: {
        "ReportId": "s",
        "DeliverabilityTestStatus": (x: jsonP.JSONValue) => cmnP.readEnum<s.DeliverabilityTestStatus>(x),
      },
      optional: {},
    }, await resp.json());
  }

  async createEmailIdentity(
    {abortSignal, ...params}: RequestConfig & s.CreateEmailIdentityRequest,
  ): Promise<s.CreateEmailIdentityResponse> {
    const body: jsonP.JSONObject = {
      EmailIdentity: params["EmailIdentity"],
      Tags: params["Tags"]?.map(x => fromTag(x)),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "CreateEmailIdentity",
      requestUri: "/v1/email/identities",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "IdentityType": (x: jsonP.JSONValue) => cmnP.readEnum<s.IdentityType>(x),
        "VerifiedForSendingStatus": "b",
        "DkimAttributes": toDkimAttributes,
      },
    }, await resp.json());
  }

  async deleteConfigurationSet(
    {abortSignal, ...params}: RequestConfig & s.DeleteConfigurationSetRequest,
  ): Promise<s.DeleteConfigurationSetResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "DeleteConfigurationSet",
      method: "DELETE",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async deleteConfigurationSetEventDestination(
    {abortSignal, ...params}: RequestConfig & s.DeleteConfigurationSetEventDestinationRequest,
  ): Promise<s.DeleteConfigurationSetEventDestinationResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "DeleteConfigurationSetEventDestination",
      method: "DELETE",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}/event-destinations/${params["EventDestinationName"]}`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async deleteDedicatedIpPool(
    {abortSignal, ...params}: RequestConfig & s.DeleteDedicatedIpPoolRequest,
  ): Promise<s.DeleteDedicatedIpPoolResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "DeleteDedicatedIpPool",
      method: "DELETE",
      requestUri: cmnP.encodePath`/v1/email/dedicated-ip-pools/${params["PoolName"]}`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async deleteEmailIdentity(
    {abortSignal, ...params}: RequestConfig & s.DeleteEmailIdentityRequest,
  ): Promise<s.DeleteEmailIdentityResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "DeleteEmailIdentity",
      method: "DELETE",
      requestUri: cmnP.encodePath`/v1/email/identities/${params["EmailIdentity"]}`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async getAccount(
    {abortSignal, ...params}: RequestConfig & s.GetAccountRequest = {},
  ): Promise<s.GetAccountResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "GetAccount",
      method: "GET",
      requestUri: "/v1/email/account",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "SendQuota": toSendQuota,
        "SendingEnabled": "b",
        "DedicatedIpAutoWarmupEnabled": "b",
        "EnforcementStatus": "s",
        "ProductionAccessEnabled": "b",
      },
    }, await resp.json());
  }

  async getBlacklistReports(
    {abortSignal, ...params}: RequestConfig & s.GetBlacklistReportsRequest,
  ): Promise<s.GetBlacklistReportsResponse> {
    const query = new URLSearchParams;
    for (const item of params["BlacklistItemNames"]) {
      query.append("BlacklistItemNames", item?.toString() ?? "");
    }
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "GetBlacklistReports",
      method: "GET",
      requestUri: "/v1/email/deliverability-dashboard/blacklist-report",
    });
    return jsonP.readObj({
      required: {
        "BlacklistReport": x => jsonP.readMap(String, l => Array.isArray(l) ? l.map(toBlacklistEntry) : [], x),
      },
      optional: {},
    }, await resp.json());
  }

  async getConfigurationSet(
    {abortSignal, ...params}: RequestConfig & s.GetConfigurationSetRequest,
  ): Promise<s.GetConfigurationSetResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "GetConfigurationSet",
      method: "GET",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}`,
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "ConfigurationSetName": "s",
        "TrackingOptions": toTrackingOptions,
        "DeliveryOptions": toDeliveryOptions,
        "ReputationOptions": toReputationOptions,
        "SendingOptions": toSendingOptions,
        "Tags": [toTag],
      },
    }, await resp.json());
  }

  async getConfigurationSetEventDestinations(
    {abortSignal, ...params}: RequestConfig & s.GetConfigurationSetEventDestinationsRequest,
  ): Promise<s.GetConfigurationSetEventDestinationsResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "GetConfigurationSetEventDestinations",
      method: "GET",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}/event-destinations`,
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "EventDestinations": [toEventDestination],
      },
    }, await resp.json());
  }

  async getDedicatedIp(
    {abortSignal, ...params}: RequestConfig & s.GetDedicatedIpRequest,
  ): Promise<s.GetDedicatedIpResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "GetDedicatedIp",
      method: "GET",
      requestUri: cmnP.encodePath`/v1/email/dedicated-ips/${params["Ip"]}`,
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "DedicatedIp": toDedicatedIp,
      },
    }, await resp.json());
  }

  async getDedicatedIps(
    {abortSignal, ...params}: RequestConfig & s.GetDedicatedIpsRequest = {},
  ): Promise<s.GetDedicatedIpsResponse> {
    const query = new URLSearchParams;
    if (params["PoolName"] != null) query.set("PoolName", params["PoolName"]?.toString() ?? "");
    if (params["NextToken"] != null) query.set("NextToken", params["NextToken"]?.toString() ?? "");
    if (params["PageSize"] != null) query.set("PageSize", params["PageSize"]?.toString() ?? "");
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "GetDedicatedIps",
      method: "GET",
      requestUri: "/v1/email/dedicated-ips",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "DedicatedIps": [toDedicatedIp],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async getDeliverabilityDashboardOptions(
    {abortSignal, ...params}: RequestConfig & s.GetDeliverabilityDashboardOptionsRequest = {},
  ): Promise<s.GetDeliverabilityDashboardOptionsResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "GetDeliverabilityDashboardOptions",
      method: "GET",
      requestUri: "/v1/email/deliverability-dashboard",
    });
    return jsonP.readObj({
      required: {
        "DashboardEnabled": "b",
      },
      optional: {
        "SubscriptionExpiryDate": "d",
        "AccountStatus": (x: jsonP.JSONValue) => cmnP.readEnum<s.DeliverabilityDashboardAccountStatus>(x),
        "ActiveSubscribedDomains": [toDomainDeliverabilityTrackingOption],
        "PendingExpirationSubscribedDomains": [toDomainDeliverabilityTrackingOption],
      },
    }, await resp.json());
  }

  async getDeliverabilityTestReport(
    {abortSignal, ...params}: RequestConfig & s.GetDeliverabilityTestReportRequest,
  ): Promise<s.GetDeliverabilityTestReportResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "GetDeliverabilityTestReport",
      method: "GET",
      requestUri: cmnP.encodePath`/v1/email/deliverability-dashboard/test-reports/${params["ReportId"]}`,
    });
    return jsonP.readObj({
      required: {
        "DeliverabilityTestReport": toDeliverabilityTestReport,
        "OverallPlacement": toPlacementStatistics,
        "IspPlacements": [toIspPlacement],
      },
      optional: {
        "Message": "s",
        "Tags": [toTag],
      },
    }, await resp.json());
  }

  async getDomainDeliverabilityCampaign(
    {abortSignal, ...params}: RequestConfig & s.GetDomainDeliverabilityCampaignRequest,
  ): Promise<s.GetDomainDeliverabilityCampaignResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "GetDomainDeliverabilityCampaign",
      method: "GET",
      requestUri: cmnP.encodePath`/v1/email/deliverability-dashboard/campaigns/${params["CampaignId"]}`,
    });
    return jsonP.readObj({
      required: {
        "DomainDeliverabilityCampaign": toDomainDeliverabilityCampaign,
      },
      optional: {},
    }, await resp.json());
  }

  async getDomainStatisticsReport(
    {abortSignal, ...params}: RequestConfig & s.GetDomainStatisticsReportRequest,
  ): Promise<s.GetDomainStatisticsReportResponse> {
    const query = new URLSearchParams;
    query.set("StartDate", cmnP.serializeDate_iso8601(params["StartDate"]) ?? "");
    query.set("EndDate", cmnP.serializeDate_iso8601(params["EndDate"]) ?? "");
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "GetDomainStatisticsReport",
      method: "GET",
      requestUri: cmnP.encodePath`/v1/email/deliverability-dashboard/statistics-report/${params["Domain"]}`,
    });
    return jsonP.readObj({
      required: {
        "OverallVolume": toOverallVolume,
        "DailyVolumes": [toDailyVolume],
      },
      optional: {},
    }, await resp.json());
  }

  async getEmailIdentity(
    {abortSignal, ...params}: RequestConfig & s.GetEmailIdentityRequest,
  ): Promise<s.GetEmailIdentityResponse> {

    const resp = await this.#client.performRequest({
      abortSignal,
      action: "GetEmailIdentity",
      method: "GET",
      requestUri: cmnP.encodePath`/v1/email/identities/${params["EmailIdentity"]}`,
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "IdentityType": (x: jsonP.JSONValue) => cmnP.readEnum<s.IdentityType>(x),
        "FeedbackForwardingStatus": "b",
        "VerifiedForSendingStatus": "b",
        "DkimAttributes": toDkimAttributes,
        "MailFromAttributes": toMailFromAttributes,
        "Tags": [toTag],
      },
    }, await resp.json());
  }

  async listConfigurationSets(
    {abortSignal, ...params}: RequestConfig & s.ListConfigurationSetsRequest = {},
  ): Promise<s.ListConfigurationSetsResponse> {
    const query = new URLSearchParams;
    if (params["NextToken"] != null) query.set("NextToken", params["NextToken"]?.toString() ?? "");
    if (params["PageSize"] != null) query.set("PageSize", params["PageSize"]?.toString() ?? "");
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "ListConfigurationSets",
      method: "GET",
      requestUri: "/v1/email/configuration-sets",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "ConfigurationSets": ["s"],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async listDedicatedIpPools(
    {abortSignal, ...params}: RequestConfig & s.ListDedicatedIpPoolsRequest = {},
  ): Promise<s.ListDedicatedIpPoolsResponse> {
    const query = new URLSearchParams;
    if (params["NextToken"] != null) query.set("NextToken", params["NextToken"]?.toString() ?? "");
    if (params["PageSize"] != null) query.set("PageSize", params["PageSize"]?.toString() ?? "");
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "ListDedicatedIpPools",
      method: "GET",
      requestUri: "/v1/email/dedicated-ip-pools",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "DedicatedIpPools": ["s"],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async listDeliverabilityTestReports(
    {abortSignal, ...params}: RequestConfig & s.ListDeliverabilityTestReportsRequest = {},
  ): Promise<s.ListDeliverabilityTestReportsResponse> {
    const query = new URLSearchParams;
    if (params["NextToken"] != null) query.set("NextToken", params["NextToken"]?.toString() ?? "");
    if (params["PageSize"] != null) query.set("PageSize", params["PageSize"]?.toString() ?? "");
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "ListDeliverabilityTestReports",
      method: "GET",
      requestUri: "/v1/email/deliverability-dashboard/test-reports",
    });
    return jsonP.readObj({
      required: {
        "DeliverabilityTestReports": [toDeliverabilityTestReport],
      },
      optional: {
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async listDomainDeliverabilityCampaigns(
    {abortSignal, ...params}: RequestConfig & s.ListDomainDeliverabilityCampaignsRequest,
  ): Promise<s.ListDomainDeliverabilityCampaignsResponse> {
    const query = new URLSearchParams;
    query.set("StartDate", cmnP.serializeDate_iso8601(params["StartDate"]) ?? "");
    query.set("EndDate", cmnP.serializeDate_iso8601(params["EndDate"]) ?? "");
    if (params["NextToken"] != null) query.set("NextToken", params["NextToken"]?.toString() ?? "");
    if (params["PageSize"] != null) query.set("PageSize", params["PageSize"]?.toString() ?? "");
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "ListDomainDeliverabilityCampaigns",
      method: "GET",
      requestUri: cmnP.encodePath`/v1/email/deliverability-dashboard/domains/${params["SubscribedDomain"]}/campaigns`,
    });
    return jsonP.readObj({
      required: {
        "DomainDeliverabilityCampaigns": [toDomainDeliverabilityCampaign],
      },
      optional: {
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async listEmailIdentities(
    {abortSignal, ...params}: RequestConfig & s.ListEmailIdentitiesRequest = {},
  ): Promise<s.ListEmailIdentitiesResponse> {
    const query = new URLSearchParams;
    if (params["NextToken"] != null) query.set("NextToken", params["NextToken"]?.toString() ?? "");
    if (params["PageSize"] != null) query.set("PageSize", params["PageSize"]?.toString() ?? "");
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "ListEmailIdentities",
      method: "GET",
      requestUri: "/v1/email/identities",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "EmailIdentities": [toIdentityInfo],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async listTagsForResource(
    {abortSignal, ...params}: RequestConfig & s.ListTagsForResourceRequest,
  ): Promise<s.ListTagsForResourceResponse> {
    const query = new URLSearchParams;
    query.set("ResourceArn", params["ResourceArn"]?.toString() ?? "");
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "ListTagsForResource",
      method: "GET",
      requestUri: "/v1/email/tags",
    });
    return jsonP.readObj({
      required: {
        "Tags": [toTag],
      },
      optional: {},
    }, await resp.json());
  }

  async putAccountDedicatedIpWarmupAttributes(
    {abortSignal, ...params}: RequestConfig & s.PutAccountDedicatedIpWarmupAttributesRequest = {},
  ): Promise<s.PutAccountDedicatedIpWarmupAttributesResponse> {
    const body: jsonP.JSONObject = {
      AutoWarmupEnabled: params["AutoWarmupEnabled"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutAccountDedicatedIpWarmupAttributes",
      method: "PUT",
      requestUri: "/v1/email/account/dedicated-ips/warmup",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putAccountSendingAttributes(
    {abortSignal, ...params}: RequestConfig & s.PutAccountSendingAttributesRequest = {},
  ): Promise<s.PutAccountSendingAttributesResponse> {
    const body: jsonP.JSONObject = {
      SendingEnabled: params["SendingEnabled"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutAccountSendingAttributes",
      method: "PUT",
      requestUri: "/v1/email/account/sending",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putConfigurationSetDeliveryOptions(
    {abortSignal, ...params}: RequestConfig & s.PutConfigurationSetDeliveryOptionsRequest,
  ): Promise<s.PutConfigurationSetDeliveryOptionsResponse> {
    const body: jsonP.JSONObject = {
      TlsPolicy: params["TlsPolicy"],
      SendingPoolName: params["SendingPoolName"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutConfigurationSetDeliveryOptions",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}/delivery-options`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putConfigurationSetReputationOptions(
    {abortSignal, ...params}: RequestConfig & s.PutConfigurationSetReputationOptionsRequest,
  ): Promise<s.PutConfigurationSetReputationOptionsResponse> {
    const body: jsonP.JSONObject = {
      ReputationMetricsEnabled: params["ReputationMetricsEnabled"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutConfigurationSetReputationOptions",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}/reputation-options`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putConfigurationSetSendingOptions(
    {abortSignal, ...params}: RequestConfig & s.PutConfigurationSetSendingOptionsRequest,
  ): Promise<s.PutConfigurationSetSendingOptionsResponse> {
    const body: jsonP.JSONObject = {
      SendingEnabled: params["SendingEnabled"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutConfigurationSetSendingOptions",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}/sending`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putConfigurationSetTrackingOptions(
    {abortSignal, ...params}: RequestConfig & s.PutConfigurationSetTrackingOptionsRequest,
  ): Promise<s.PutConfigurationSetTrackingOptionsResponse> {
    const body: jsonP.JSONObject = {
      CustomRedirectDomain: params["CustomRedirectDomain"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutConfigurationSetTrackingOptions",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}/tracking-options`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putDedicatedIpInPool(
    {abortSignal, ...params}: RequestConfig & s.PutDedicatedIpInPoolRequest,
  ): Promise<s.PutDedicatedIpInPoolResponse> {
    const body: jsonP.JSONObject = {
      DestinationPoolName: params["DestinationPoolName"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutDedicatedIpInPool",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/dedicated-ips/${params["Ip"]}/pool`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putDedicatedIpWarmupAttributes(
    {abortSignal, ...params}: RequestConfig & s.PutDedicatedIpWarmupAttributesRequest,
  ): Promise<s.PutDedicatedIpWarmupAttributesResponse> {
    const body: jsonP.JSONObject = {
      WarmupPercentage: params["WarmupPercentage"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutDedicatedIpWarmupAttributes",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/dedicated-ips/${params["Ip"]}/warmup`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putDeliverabilityDashboardOption(
    {abortSignal, ...params}: RequestConfig & s.PutDeliverabilityDashboardOptionRequest,
  ): Promise<s.PutDeliverabilityDashboardOptionResponse> {
    const body: jsonP.JSONObject = {
      DashboardEnabled: params["DashboardEnabled"],
      SubscribedDomains: params["SubscribedDomains"]?.map(x => fromDomainDeliverabilityTrackingOption(x)),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutDeliverabilityDashboardOption",
      method: "PUT",
      requestUri: "/v1/email/deliverability-dashboard",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putEmailIdentityDkimAttributes(
    {abortSignal, ...params}: RequestConfig & s.PutEmailIdentityDkimAttributesRequest,
  ): Promise<s.PutEmailIdentityDkimAttributesResponse> {
    const body: jsonP.JSONObject = {
      SigningEnabled: params["SigningEnabled"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutEmailIdentityDkimAttributes",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/identities/${params["EmailIdentity"]}/dkim`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putEmailIdentityFeedbackAttributes(
    {abortSignal, ...params}: RequestConfig & s.PutEmailIdentityFeedbackAttributesRequest,
  ): Promise<s.PutEmailIdentityFeedbackAttributesResponse> {
    const body: jsonP.JSONObject = {
      EmailForwardingEnabled: params["EmailForwardingEnabled"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutEmailIdentityFeedbackAttributes",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/identities/${params["EmailIdentity"]}/feedback`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async putEmailIdentityMailFromAttributes(
    {abortSignal, ...params}: RequestConfig & s.PutEmailIdentityMailFromAttributesRequest,
  ): Promise<s.PutEmailIdentityMailFromAttributesResponse> {
    const body: jsonP.JSONObject = {
      MailFromDomain: params["MailFromDomain"],
      BehaviorOnMxFailure: params["BehaviorOnMxFailure"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutEmailIdentityMailFromAttributes",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/identities/${params["EmailIdentity"]}/mail-from`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async sendEmail(
    {abortSignal, ...params}: RequestConfig & s.SendEmailRequest,
  ): Promise<s.SendEmailResponse> {
    const body: jsonP.JSONObject = {
      FromEmailAddress: params["FromEmailAddress"],
      Destination: fromDestination(params["Destination"]),
      ReplyToAddresses: params["ReplyToAddresses"],
      FeedbackForwardingEmailAddress: params["FeedbackForwardingEmailAddress"],
      Content: fromEmailContent(params["Content"]),
      EmailTags: params["EmailTags"]?.map(x => fromMessageTag(x)),
      ConfigurationSetName: params["ConfigurationSetName"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "SendEmail",
      requestUri: "/v1/email/outbound-emails",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "MessageId": "s",
      },
    }, await resp.json());
  }

  async tagResource(
    {abortSignal, ...params}: RequestConfig & s.TagResourceRequest,
  ): Promise<s.TagResourceResponse> {
    const body: jsonP.JSONObject = {
      ResourceArn: params["ResourceArn"],
      Tags: params["Tags"]?.map(x => fromTag(x)),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "TagResource",
      requestUri: "/v1/email/tags",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async untagResource(
    {abortSignal, ...params}: RequestConfig & s.UntagResourceRequest,
  ): Promise<s.UntagResourceResponse> {
    const query = new URLSearchParams;
    query.set("ResourceArn", params["ResourceArn"]?.toString() ?? "");
    for (const item of params["TagKeys"]) {
      query.append("TagKeys", item?.toString() ?? "");
    }
    const resp = await this.#client.performRequest({
      abortSignal, query,
      action: "UntagResource",
      method: "DELETE",
      requestUri: "/v1/email/tags",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async updateConfigurationSetEventDestination(
    {abortSignal, ...params}: RequestConfig & s.UpdateConfigurationSetEventDestinationRequest,
  ): Promise<s.UpdateConfigurationSetEventDestinationResponse> {
    const body: jsonP.JSONObject = {
      EventDestination: fromEventDestinationDefinition(params["EventDestination"]),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "UpdateConfigurationSetEventDestination",
      method: "PUT",
      requestUri: cmnP.encodePath`/v1/email/configuration-sets/${params["ConfigurationSetName"]}/event-destinations/${params["EventDestinationName"]}`,
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

}

function fromTrackingOptions(input?: s.TrackingOptions | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    CustomRedirectDomain: input["CustomRedirectDomain"],
  }
}
function toTrackingOptions(root: jsonP.JSONValue): s.TrackingOptions {
  return jsonP.readObj({
    required: {
      "CustomRedirectDomain": "s",
    },
    optional: {},
  }, root);
}

function fromDeliveryOptions(input?: s.DeliveryOptions | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    TlsPolicy: input["TlsPolicy"],
    SendingPoolName: input["SendingPoolName"],
  }
}
function toDeliveryOptions(root: jsonP.JSONValue): s.DeliveryOptions {
  return jsonP.readObj({
    required: {},
    optional: {
      "TlsPolicy": (x: jsonP.JSONValue) => cmnP.readEnum<s.TlsPolicy>(x),
      "SendingPoolName": "s",
    },
  }, root);
}

function fromReputationOptions(input?: s.ReputationOptions | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    ReputationMetricsEnabled: input["ReputationMetricsEnabled"],
    LastFreshStart: jsonP.serializeDate_unixTimestamp(input["LastFreshStart"]),
  }
}
function toReputationOptions(root: jsonP.JSONValue): s.ReputationOptions {
  return jsonP.readObj({
    required: {},
    optional: {
      "ReputationMetricsEnabled": "b",
      "LastFreshStart": "d",
    },
  }, root);
}

function fromSendingOptions(input?: s.SendingOptions | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    SendingEnabled: input["SendingEnabled"],
  }
}
function toSendingOptions(root: jsonP.JSONValue): s.SendingOptions {
  return jsonP.readObj({
    required: {},
    optional: {
      "SendingEnabled": "b",
    },
  }, root);
}

function fromTag(input?: s.Tag | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Key: input["Key"],
    Value: input["Value"],
  }
}
function toTag(root: jsonP.JSONValue): s.Tag {
  return jsonP.readObj({
    required: {
      "Key": "s",
      "Value": "s",
    },
    optional: {},
  }, root);
}

function fromEventDestinationDefinition(input?: s.EventDestinationDefinition | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Enabled: input["Enabled"],
    MatchingEventTypes: input["MatchingEventTypes"],
    KinesisFirehoseDestination: fromKinesisFirehoseDestination(input["KinesisFirehoseDestination"]),
    CloudWatchDestination: fromCloudWatchDestination(input["CloudWatchDestination"]),
    SnsDestination: fromSnsDestination(input["SnsDestination"]),
    PinpointDestination: fromPinpointDestination(input["PinpointDestination"]),
  }
}

function fromKinesisFirehoseDestination(input?: s.KinesisFirehoseDestination | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    IamRoleArn: input["IamRoleArn"],
    DeliveryStreamArn: input["DeliveryStreamArn"],
  }
}
function toKinesisFirehoseDestination(root: jsonP.JSONValue): s.KinesisFirehoseDestination {
  return jsonP.readObj({
    required: {
      "IamRoleArn": "s",
      "DeliveryStreamArn": "s",
    },
    optional: {},
  }, root);
}

function fromCloudWatchDestination(input?: s.CloudWatchDestination | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    DimensionConfigurations: input["DimensionConfigurations"]?.map(x => fromCloudWatchDimensionConfiguration(x)),
  }
}
function toCloudWatchDestination(root: jsonP.JSONValue): s.CloudWatchDestination {
  return jsonP.readObj({
    required: {
      "DimensionConfigurations": [toCloudWatchDimensionConfiguration],
    },
    optional: {},
  }, root);
}

function fromCloudWatchDimensionConfiguration(input?: s.CloudWatchDimensionConfiguration | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    DimensionName: input["DimensionName"],
    DimensionValueSource: input["DimensionValueSource"],
    DefaultDimensionValue: input["DefaultDimensionValue"],
  }
}
function toCloudWatchDimensionConfiguration(root: jsonP.JSONValue): s.CloudWatchDimensionConfiguration {
  return jsonP.readObj({
    required: {
      "DimensionName": "s",
      "DimensionValueSource": (x: jsonP.JSONValue) => cmnP.readEnum<s.DimensionValueSource>(x),
      "DefaultDimensionValue": "s",
    },
    optional: {},
  }, root);
}

function fromSnsDestination(input?: s.SnsDestination | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    TopicArn: input["TopicArn"],
  }
}
function toSnsDestination(root: jsonP.JSONValue): s.SnsDestination {
  return jsonP.readObj({
    required: {
      "TopicArn": "s",
    },
    optional: {},
  }, root);
}

function fromPinpointDestination(input?: s.PinpointDestination | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    ApplicationArn: input["ApplicationArn"],
  }
}
function toPinpointDestination(root: jsonP.JSONValue): s.PinpointDestination {
  return jsonP.readObj({
    required: {},
    optional: {
      "ApplicationArn": "s",
    },
  }, root);
}

function fromEmailContent(input?: s.EmailContent | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Simple: fromMessage(input["Simple"]),
    Raw: fromRawMessage(input["Raw"]),
    Template: fromTemplate(input["Template"]),
  }
}

function fromMessage(input?: s.Message | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Subject: fromContent(input["Subject"]),
    Body: fromBody(input["Body"]),
  }
}

function fromContent(input?: s.Content | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Data: input["Data"],
    Charset: input["Charset"],
  }
}

function fromBody(input?: s.Body | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Text: fromContent(input["Text"]),
    Html: fromContent(input["Html"]),
  }
}

function fromRawMessage(input?: s.RawMessage | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Data: jsonP.serializeBlob(input["Data"]),
  }
}

function fromTemplate(input?: s.Template | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    TemplateArn: input["TemplateArn"],
    TemplateData: input["TemplateData"],
  }
}

function fromDomainDeliverabilityTrackingOption(input?: s.DomainDeliverabilityTrackingOption | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Domain: input["Domain"],
    SubscriptionStartDate: jsonP.serializeDate_unixTimestamp(input["SubscriptionStartDate"]),
    InboxPlacementTrackingOption: fromInboxPlacementTrackingOption(input["InboxPlacementTrackingOption"]),
  }
}
function toDomainDeliverabilityTrackingOption(root: jsonP.JSONValue): s.DomainDeliverabilityTrackingOption {
  return jsonP.readObj({
    required: {},
    optional: {
      "Domain": "s",
      "SubscriptionStartDate": "d",
      "InboxPlacementTrackingOption": toInboxPlacementTrackingOption,
    },
  }, root);
}

function fromInboxPlacementTrackingOption(input?: s.InboxPlacementTrackingOption | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Global: input["Global"],
    TrackedIsps: input["TrackedIsps"],
  }
}
function toInboxPlacementTrackingOption(root: jsonP.JSONValue): s.InboxPlacementTrackingOption {
  return jsonP.readObj({
    required: {},
    optional: {
      "Global": "b",
      "TrackedIsps": ["s"],
    },
  }, root);
}

function fromDestination(input?: s.Destination | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    ToAddresses: input["ToAddresses"],
    CcAddresses: input["CcAddresses"],
    BccAddresses: input["BccAddresses"],
  }
}

function fromMessageTag(input?: s.MessageTag | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Name: input["Name"],
    Value: input["Value"],
  }
}

function toDkimAttributes(root: jsonP.JSONValue): s.DkimAttributes {
  return jsonP.readObj({
    required: {},
    optional: {
      "SigningEnabled": "b",
      "Status": (x: jsonP.JSONValue) => cmnP.readEnum<s.DkimStatus>(x),
      "Tokens": ["s"],
    },
  }, root);
}

function toSendQuota(root: jsonP.JSONValue): s.SendQuota {
  return jsonP.readObj({
    required: {},
    optional: {
      "Max24HourSend": "n",
      "MaxSendRate": "n",
      "SentLast24Hours": "n",
    },
  }, root);
}

function toBlacklistEntry(root: jsonP.JSONValue): s.BlacklistEntry {
  return jsonP.readObj({
    required: {},
    optional: {
      "RblName": "s",
      "ListingTime": "d",
      "Description": "s",
    },
  }, root);
}

function toEventDestination(root: jsonP.JSONValue): s.EventDestination {
  return jsonP.readObj({
    required: {
      "Name": "s",
      "MatchingEventTypes": [(x: jsonP.JSONValue) => cmnP.readEnum<s.EventType>(x)],
    },
    optional: {
      "Enabled": "b",
      "KinesisFirehoseDestination": toKinesisFirehoseDestination,
      "CloudWatchDestination": toCloudWatchDestination,
      "SnsDestination": toSnsDestination,
      "PinpointDestination": toPinpointDestination,
    },
  }, root);
}

function toDedicatedIp(root: jsonP.JSONValue): s.DedicatedIp {
  return jsonP.readObj({
    required: {
      "Ip": "s",
      "WarmupStatus": (x: jsonP.JSONValue) => cmnP.readEnum<s.WarmupStatus>(x),
      "WarmupPercentage": "n",
    },
    optional: {
      "PoolName": "s",
    },
  }, root);
}

function toDeliverabilityTestReport(root: jsonP.JSONValue): s.DeliverabilityTestReport {
  return jsonP.readObj({
    required: {},
    optional: {
      "ReportId": "s",
      "ReportName": "s",
      "Subject": "s",
      "FromEmailAddress": "s",
      "CreateDate": "d",
      "DeliverabilityTestStatus": (x: jsonP.JSONValue) => cmnP.readEnum<s.DeliverabilityTestStatus>(x),
    },
  }, root);
}

function toPlacementStatistics(root: jsonP.JSONValue): s.PlacementStatistics {
  return jsonP.readObj({
    required: {},
    optional: {
      "InboxPercentage": "n",
      "SpamPercentage": "n",
      "MissingPercentage": "n",
      "SpfPercentage": "n",
      "DkimPercentage": "n",
    },
  }, root);
}

function toIspPlacement(root: jsonP.JSONValue): s.IspPlacement {
  return jsonP.readObj({
    required: {},
    optional: {
      "IspName": "s",
      "PlacementStatistics": toPlacementStatistics,
    },
  }, root);
}

function toDomainDeliverabilityCampaign(root: jsonP.JSONValue): s.DomainDeliverabilityCampaign {
  return jsonP.readObj({
    required: {},
    optional: {
      "CampaignId": "s",
      "ImageUrl": "s",
      "Subject": "s",
      "FromAddress": "s",
      "SendingIps": ["s"],
      "FirstSeenDateTime": "d",
      "LastSeenDateTime": "d",
      "InboxCount": "n",
      "SpamCount": "n",
      "ReadRate": "n",
      "DeleteRate": "n",
      "ReadDeleteRate": "n",
      "ProjectedVolume": "n",
      "Esps": ["s"],
    },
  }, root);
}

function toOverallVolume(root: jsonP.JSONValue): s.OverallVolume {
  return jsonP.readObj({
    required: {},
    optional: {
      "VolumeStatistics": toVolumeStatistics,
      "ReadRatePercent": "n",
      "DomainIspPlacements": [toDomainIspPlacement],
    },
  }, root);
}

function toVolumeStatistics(root: jsonP.JSONValue): s.VolumeStatistics {
  return jsonP.readObj({
    required: {},
    optional: {
      "InboxRawCount": "n",
      "SpamRawCount": "n",
      "ProjectedInbox": "n",
      "ProjectedSpam": "n",
    },
  }, root);
}

function toDomainIspPlacement(root: jsonP.JSONValue): s.DomainIspPlacement {
  return jsonP.readObj({
    required: {},
    optional: {
      "IspName": "s",
      "InboxRawCount": "n",
      "SpamRawCount": "n",
      "InboxPercentage": "n",
      "SpamPercentage": "n",
    },
  }, root);
}

function toDailyVolume(root: jsonP.JSONValue): s.DailyVolume {
  return jsonP.readObj({
    required: {},
    optional: {
      "StartDate": "d",
      "VolumeStatistics": toVolumeStatistics,
      "DomainIspPlacements": [toDomainIspPlacement],
    },
  }, root);
}

function toMailFromAttributes(root: jsonP.JSONValue): s.MailFromAttributes {
  return jsonP.readObj({
    required: {
      "MailFromDomain": "s",
      "MailFromDomainStatus": (x: jsonP.JSONValue) => cmnP.readEnum<s.MailFromDomainStatus>(x),
      "BehaviorOnMxFailure": (x: jsonP.JSONValue) => cmnP.readEnum<s.BehaviorOnMxFailure>(x),
    },
    optional: {},
  }, root);
}

function toIdentityInfo(root: jsonP.JSONValue): s.IdentityInfo {
  return jsonP.readObj({
    required: {},
    optional: {
      "IdentityType": (x: jsonP.JSONValue) => cmnP.readEnum<s.IdentityType>(x),
      "IdentityName": "s",
      "SendingEnabled": "b",
    },
  }, root);
}
