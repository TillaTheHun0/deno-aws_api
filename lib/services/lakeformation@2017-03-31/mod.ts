// Autogenerated API client for: AWS Lake Formation

import type { ServiceClient, ApiFactory, ApiMetadata } from '../../client/common.ts';
interface RequestConfig {
  abortSignal?: AbortSignal;
}

import * as cmnP from "../../encoding/common.ts";
import * as jsonP from "../../encoding/json.ts";

export default class LakeFormation {
  #client: ServiceClient;
  constructor(apiFactory: ApiFactory) {
    this.#client = apiFactory.buildServiceClient(LakeFormation.ApiMetadata);
  }

  static ApiMetadata: ApiMetadata = {
    "apiVersion": "2017-03-31",
    "endpointPrefix": "lakeformation",
    "jsonVersion": "1.1",
    "protocol": "json",
    "serviceFullName": "AWS Lake Formation",
    "serviceId": "LakeFormation",
    "signatureVersion": "v4",
    "signingName": "lakeformation",
    "targetPrefix": "AWSLakeFormation",
    "uid": "lakeformation-2017-03-31"
  };

  async batchGrantPermissions(
    {abortSignal, ...params}: RequestConfig & BatchGrantPermissionsRequest,
  ): Promise<BatchGrantPermissionsResponse> {
    const body: jsonP.JSONObject = {
      CatalogId: params["CatalogId"],
      Entries: params["Entries"]?.map(x => fromBatchPermissionsRequestEntry(x)),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "BatchGrantPermissions",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "Failures": [toBatchPermissionsFailureEntry],
      },
    }, await resp.json());
  }

  async batchRevokePermissions(
    {abortSignal, ...params}: RequestConfig & BatchRevokePermissionsRequest,
  ): Promise<BatchRevokePermissionsResponse> {
    const body: jsonP.JSONObject = {
      CatalogId: params["CatalogId"],
      Entries: params["Entries"]?.map(x => fromBatchPermissionsRequestEntry(x)),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "BatchRevokePermissions",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "Failures": [toBatchPermissionsFailureEntry],
      },
    }, await resp.json());
  }

  async deregisterResource(
    {abortSignal, ...params}: RequestConfig & DeregisterResourceRequest,
  ): Promise<DeregisterResourceResponse> {
    const body: jsonP.JSONObject = {
      ResourceArn: params["ResourceArn"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DeregisterResource",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async describeResource(
    {abortSignal, ...params}: RequestConfig & DescribeResourceRequest,
  ): Promise<DescribeResourceResponse> {
    const body: jsonP.JSONObject = {
      ResourceArn: params["ResourceArn"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "DescribeResource",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "ResourceInfo": toResourceInfo,
      },
    }, await resp.json());
  }

  async getDataLakeSettings(
    {abortSignal, ...params}: RequestConfig & GetDataLakeSettingsRequest = {},
  ): Promise<GetDataLakeSettingsResponse> {
    const body: jsonP.JSONObject = {
      CatalogId: params["CatalogId"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "GetDataLakeSettings",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "DataLakeSettings": toDataLakeSettings,
      },
    }, await resp.json());
  }

  async getEffectivePermissionsForPath(
    {abortSignal, ...params}: RequestConfig & GetEffectivePermissionsForPathRequest,
  ): Promise<GetEffectivePermissionsForPathResponse> {
    const body: jsonP.JSONObject = {
      CatalogId: params["CatalogId"],
      ResourceArn: params["ResourceArn"],
      NextToken: params["NextToken"],
      MaxResults: params["MaxResults"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "GetEffectivePermissionsForPath",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "Permissions": [toPrincipalResourcePermissions],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async grantPermissions(
    {abortSignal, ...params}: RequestConfig & GrantPermissionsRequest,
  ): Promise<GrantPermissionsResponse> {
    const body: jsonP.JSONObject = {
      CatalogId: params["CatalogId"],
      Principal: fromDataLakePrincipal(params["Principal"]),
      Resource: fromResource(params["Resource"]),
      Permissions: params["Permissions"],
      PermissionsWithGrantOption: params["PermissionsWithGrantOption"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "GrantPermissions",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async listPermissions(
    {abortSignal, ...params}: RequestConfig & ListPermissionsRequest = {},
  ): Promise<ListPermissionsResponse> {
    const body: jsonP.JSONObject = {
      CatalogId: params["CatalogId"],
      Principal: fromDataLakePrincipal(params["Principal"]),
      ResourceType: params["ResourceType"],
      Resource: fromResource(params["Resource"]),
      NextToken: params["NextToken"],
      MaxResults: params["MaxResults"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "ListPermissions",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "PrincipalResourcePermissions": [toPrincipalResourcePermissions],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async listResources(
    {abortSignal, ...params}: RequestConfig & ListResourcesRequest = {},
  ): Promise<ListResourcesResponse> {
    const body: jsonP.JSONObject = {
      FilterConditionList: params["FilterConditionList"]?.map(x => fromFilterCondition(x)),
      MaxResults: params["MaxResults"],
      NextToken: params["NextToken"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "ListResources",
    });
    return jsonP.readObj({
      required: {},
      optional: {
        "ResourceInfoList": [toResourceInfo],
        "NextToken": "s",
      },
    }, await resp.json());
  }

  async putDataLakeSettings(
    {abortSignal, ...params}: RequestConfig & PutDataLakeSettingsRequest,
  ): Promise<PutDataLakeSettingsResponse> {
    const body: jsonP.JSONObject = {
      CatalogId: params["CatalogId"],
      DataLakeSettings: fromDataLakeSettings(params["DataLakeSettings"]),
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "PutDataLakeSettings",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async registerResource(
    {abortSignal, ...params}: RequestConfig & RegisterResourceRequest,
  ): Promise<RegisterResourceResponse> {
    const body: jsonP.JSONObject = {
      ResourceArn: params["ResourceArn"],
      UseServiceLinkedRole: params["UseServiceLinkedRole"],
      RoleArn: params["RoleArn"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "RegisterResource",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async revokePermissions(
    {abortSignal, ...params}: RequestConfig & RevokePermissionsRequest,
  ): Promise<RevokePermissionsResponse> {
    const body: jsonP.JSONObject = {
      CatalogId: params["CatalogId"],
      Principal: fromDataLakePrincipal(params["Principal"]),
      Resource: fromResource(params["Resource"]),
      Permissions: params["Permissions"],
      PermissionsWithGrantOption: params["PermissionsWithGrantOption"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "RevokePermissions",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

  async updateResource(
    {abortSignal, ...params}: RequestConfig & UpdateResourceRequest,
  ): Promise<UpdateResourceResponse> {
    const body: jsonP.JSONObject = {
      RoleArn: params["RoleArn"],
      ResourceArn: params["ResourceArn"],
    };
    const resp = await this.#client.performRequest({
      abortSignal, body,
      action: "UpdateResource",
    });
    return jsonP.readObj({
      required: {},
      optional: {},
    }, await resp.json());
  }

}

// refs: 1 - tags: named, input
export interface BatchGrantPermissionsRequest {
  CatalogId?: string | null;
  Entries: BatchPermissionsRequestEntry[];
}

// refs: 1 - tags: named, input
export interface BatchRevokePermissionsRequest {
  CatalogId?: string | null;
  Entries: BatchPermissionsRequestEntry[];
}

// refs: 1 - tags: named, input
export interface DeregisterResourceRequest {
  ResourceArn: string;
}

// refs: 1 - tags: named, input
export interface DescribeResourceRequest {
  ResourceArn: string;
}

// refs: 1 - tags: named, input
export interface GetDataLakeSettingsRequest {
  CatalogId?: string | null;
}

// refs: 1 - tags: named, input
export interface GetEffectivePermissionsForPathRequest {
  CatalogId?: string | null;
  ResourceArn: string;
  NextToken?: string | null;
  MaxResults?: number | null;
}

// refs: 1 - tags: named, input
export interface GrantPermissionsRequest {
  CatalogId?: string | null;
  Principal: DataLakePrincipal;
  Resource: Resource;
  Permissions: Permission[];
  PermissionsWithGrantOption?: Permission[] | null;
}

// refs: 1 - tags: named, input
export interface ListPermissionsRequest {
  CatalogId?: string | null;
  Principal?: DataLakePrincipal | null;
  ResourceType?: DataLakeResourceType | null;
  Resource?: Resource | null;
  NextToken?: string | null;
  MaxResults?: number | null;
}

// refs: 1 - tags: named, input
export interface ListResourcesRequest {
  FilterConditionList?: FilterCondition[] | null;
  MaxResults?: number | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, input
export interface PutDataLakeSettingsRequest {
  CatalogId?: string | null;
  DataLakeSettings: DataLakeSettings;
}

// refs: 1 - tags: named, input
export interface RegisterResourceRequest {
  ResourceArn: string;
  UseServiceLinkedRole?: boolean | null;
  RoleArn?: string | null;
}

// refs: 1 - tags: named, input
export interface RevokePermissionsRequest {
  CatalogId?: string | null;
  Principal: DataLakePrincipal;
  Resource: Resource;
  Permissions: Permission[];
  PermissionsWithGrantOption?: Permission[] | null;
}

// refs: 1 - tags: named, input
export interface UpdateResourceRequest {
  RoleArn: string;
  ResourceArn: string;
}

// refs: 1 - tags: named, output
export interface BatchGrantPermissionsResponse {
  Failures?: BatchPermissionsFailureEntry[] | null;
}

// refs: 1 - tags: named, output
export interface BatchRevokePermissionsResponse {
  Failures?: BatchPermissionsFailureEntry[] | null;
}

// refs: 1 - tags: named, output
export interface DeregisterResourceResponse {
}

// refs: 1 - tags: named, output
export interface DescribeResourceResponse {
  ResourceInfo?: ResourceInfo | null;
}

// refs: 1 - tags: named, output
export interface GetDataLakeSettingsResponse {
  DataLakeSettings?: DataLakeSettings | null;
}

// refs: 1 - tags: named, output
export interface GetEffectivePermissionsForPathResponse {
  Permissions?: PrincipalResourcePermissions[] | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface GrantPermissionsResponse {
}

// refs: 1 - tags: named, output
export interface ListPermissionsResponse {
  PrincipalResourcePermissions?: PrincipalResourcePermissions[] | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface ListResourcesResponse {
  ResourceInfoList?: ResourceInfo[] | null;
  NextToken?: string | null;
}

// refs: 1 - tags: named, output
export interface PutDataLakeSettingsResponse {
}

// refs: 1 - tags: named, output
export interface RegisterResourceResponse {
}

// refs: 1 - tags: named, output
export interface RevokePermissionsResponse {
}

// refs: 1 - tags: named, output
export interface UpdateResourceResponse {
}

// refs: 4 - tags: input, named, interface, output
export interface BatchPermissionsRequestEntry {
  Id: string;
  Principal?: DataLakePrincipal | null;
  Resource?: Resource | null;
  Permissions?: Permission[] | null;
  PermissionsWithGrantOption?: Permission[] | null;
}
function fromBatchPermissionsRequestEntry(input?: BatchPermissionsRequestEntry | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Id: input["Id"],
    Principal: fromDataLakePrincipal(input["Principal"]),
    Resource: fromResource(input["Resource"]),
    Permissions: input["Permissions"],
    PermissionsWithGrantOption: input["PermissionsWithGrantOption"],
  }
}
function toBatchPermissionsRequestEntry(root: jsonP.JSONValue): BatchPermissionsRequestEntry {
  return jsonP.readObj({
    required: {
      "Id": "s",
    },
    optional: {
      "Principal": toDataLakePrincipal,
      "Resource": toResource,
      "Permissions": [(x: jsonP.JSONValue) => cmnP.readEnum<Permission>(x)],
      "PermissionsWithGrantOption": [(x: jsonP.JSONValue) => cmnP.readEnum<Permission>(x)],
    },
  }, root);
}

// refs: 15 - tags: input, named, interface, output
export interface DataLakePrincipal {
  DataLakePrincipalIdentifier?: string | null;
}
function fromDataLakePrincipal(input?: DataLakePrincipal | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    DataLakePrincipalIdentifier: input["DataLakePrincipalIdentifier"],
  }
}
function toDataLakePrincipal(root: jsonP.JSONValue): DataLakePrincipal {
  return jsonP.readObj({
    required: {},
    optional: {
      "DataLakePrincipalIdentifier": "s",
    },
  }, root);
}

// refs: 9 - tags: input, named, interface, output
export interface Resource {
  Catalog?: CatalogResource | null;
  Database?: DatabaseResource | null;
  Table?: TableResource | null;
  TableWithColumns?: TableWithColumnsResource | null;
  DataLocation?: DataLocationResource | null;
}
function fromResource(input?: Resource | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Catalog: fromCatalogResource(input["Catalog"]),
    Database: fromDatabaseResource(input["Database"]),
    Table: fromTableResource(input["Table"]),
    TableWithColumns: fromTableWithColumnsResource(input["TableWithColumns"]),
    DataLocation: fromDataLocationResource(input["DataLocation"]),
  }
}
function toResource(root: jsonP.JSONValue): Resource {
  return jsonP.readObj({
    required: {},
    optional: {
      "Catalog": toCatalogResource,
      "Database": toDatabaseResource,
      "Table": toTableResource,
      "TableWithColumns": toTableWithColumnsResource,
      "DataLocation": toDataLocationResource,
    },
  }, root);
}

// refs: 9 - tags: input, named, interface, output
export interface CatalogResource {
}
function fromCatalogResource(input?: CatalogResource | null): jsonP.JSONValue {
  if (!input) return input;
  return {
  }
}
function toCatalogResource(root: jsonP.JSONValue): CatalogResource {
  return jsonP.readObj({
    required: {},
    optional: {},
  }, root);
}

// refs: 9 - tags: input, named, interface, output
export interface DatabaseResource {
  CatalogId?: string | null;
  Name: string;
}
function fromDatabaseResource(input?: DatabaseResource | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    CatalogId: input["CatalogId"],
    Name: input["Name"],
  }
}
function toDatabaseResource(root: jsonP.JSONValue): DatabaseResource {
  return jsonP.readObj({
    required: {
      "Name": "s",
    },
    optional: {
      "CatalogId": "s",
    },
  }, root);
}

// refs: 9 - tags: input, named, interface, output
export interface TableResource {
  CatalogId?: string | null;
  DatabaseName: string;
  Name?: string | null;
  TableWildcard?: TableWildcard | null;
}
function fromTableResource(input?: TableResource | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    CatalogId: input["CatalogId"],
    DatabaseName: input["DatabaseName"],
    Name: input["Name"],
    TableWildcard: fromTableWildcard(input["TableWildcard"]),
  }
}
function toTableResource(root: jsonP.JSONValue): TableResource {
  return jsonP.readObj({
    required: {
      "DatabaseName": "s",
    },
    optional: {
      "CatalogId": "s",
      "Name": "s",
      "TableWildcard": toTableWildcard,
    },
  }, root);
}

// refs: 9 - tags: input, named, interface, output
export interface TableWildcard {
}
function fromTableWildcard(input?: TableWildcard | null): jsonP.JSONValue {
  if (!input) return input;
  return {
  }
}
function toTableWildcard(root: jsonP.JSONValue): TableWildcard {
  return jsonP.readObj({
    required: {},
    optional: {},
  }, root);
}

// refs: 9 - tags: input, named, interface, output
export interface TableWithColumnsResource {
  CatalogId?: string | null;
  DatabaseName: string;
  Name: string;
  ColumnNames?: string[] | null;
  ColumnWildcard?: ColumnWildcard | null;
}
function fromTableWithColumnsResource(input?: TableWithColumnsResource | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    CatalogId: input["CatalogId"],
    DatabaseName: input["DatabaseName"],
    Name: input["Name"],
    ColumnNames: input["ColumnNames"],
    ColumnWildcard: fromColumnWildcard(input["ColumnWildcard"]),
  }
}
function toTableWithColumnsResource(root: jsonP.JSONValue): TableWithColumnsResource {
  return jsonP.readObj({
    required: {
      "DatabaseName": "s",
      "Name": "s",
    },
    optional: {
      "CatalogId": "s",
      "ColumnNames": ["s"],
      "ColumnWildcard": toColumnWildcard,
    },
  }, root);
}

// refs: 9 - tags: input, named, interface, output
export interface ColumnWildcard {
  ExcludedColumnNames?: string[] | null;
}
function fromColumnWildcard(input?: ColumnWildcard | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    ExcludedColumnNames: input["ExcludedColumnNames"],
  }
}
function toColumnWildcard(root: jsonP.JSONValue): ColumnWildcard {
  return jsonP.readObj({
    required: {},
    optional: {
      "ExcludedColumnNames": ["s"],
    },
  }, root);
}

// refs: 9 - tags: input, named, interface, output
export interface DataLocationResource {
  CatalogId?: string | null;
  ResourceArn: string;
}
function fromDataLocationResource(input?: DataLocationResource | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    CatalogId: input["CatalogId"],
    ResourceArn: input["ResourceArn"],
  }
}
function toDataLocationResource(root: jsonP.JSONValue): DataLocationResource {
  return jsonP.readObj({
    required: {
      "ResourceArn": "s",
    },
    optional: {
      "CatalogId": "s",
    },
  }, root);
}

// refs: 20 - tags: input, named, enum, output
export type Permission =
| "ALL"
| "SELECT"
| "ALTER"
| "DROP"
| "DELETE"
| "INSERT"
| "DESCRIBE"
| "CREATE_DATABASE"
| "CREATE_TABLE"
| "DATA_LOCATION_ACCESS"
| cmnP.UnexpectedEnumValue;

// refs: 1 - tags: input, named, enum
export type DataLakeResourceType =
| "CATALOG"
| "DATABASE"
| "TABLE"
| "DATA_LOCATION"
| cmnP.UnexpectedEnumValue;

// refs: 1 - tags: input, named, interface
export interface FilterCondition {
  Field?: FieldNameString | null;
  ComparisonOperator?: ComparisonOperator | null;
  StringValueList?: string[] | null;
}
function fromFilterCondition(input?: FilterCondition | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Field: input["Field"],
    ComparisonOperator: input["ComparisonOperator"],
    StringValueList: input["StringValueList"],
  }
}

// refs: 1 - tags: input, named, enum
export type FieldNameString =
| "RESOURCE_ARN"
| "ROLE_ARN"
| "LAST_MODIFIED"
| cmnP.UnexpectedEnumValue;

// refs: 1 - tags: input, named, enum
export type ComparisonOperator =
| "EQ"
| "NE"
| "LE"
| "LT"
| "GE"
| "GT"
| "CONTAINS"
| "NOT_CONTAINS"
| "BEGINS_WITH"
| "IN"
| "BETWEEN"
| cmnP.UnexpectedEnumValue;

// refs: 2 - tags: input, named, interface, output
export interface DataLakeSettings {
  DataLakeAdmins?: DataLakePrincipal[] | null;
  CreateDatabaseDefaultPermissions?: PrincipalPermissions[] | null;
  CreateTableDefaultPermissions?: PrincipalPermissions[] | null;
  TrustedResourceOwners?: string[] | null;
}
function fromDataLakeSettings(input?: DataLakeSettings | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    DataLakeAdmins: input["DataLakeAdmins"]?.map(x => fromDataLakePrincipal(x)),
    CreateDatabaseDefaultPermissions: input["CreateDatabaseDefaultPermissions"]?.map(x => fromPrincipalPermissions(x)),
    CreateTableDefaultPermissions: input["CreateTableDefaultPermissions"]?.map(x => fromPrincipalPermissions(x)),
    TrustedResourceOwners: input["TrustedResourceOwners"],
  }
}
function toDataLakeSettings(root: jsonP.JSONValue): DataLakeSettings {
  return jsonP.readObj({
    required: {},
    optional: {
      "DataLakeAdmins": [toDataLakePrincipal],
      "CreateDatabaseDefaultPermissions": [toPrincipalPermissions],
      "CreateTableDefaultPermissions": [toPrincipalPermissions],
      "TrustedResourceOwners": ["s"],
    },
  }, root);
}

// refs: 4 - tags: input, named, interface, output
export interface PrincipalPermissions {
  Principal?: DataLakePrincipal | null;
  Permissions?: Permission[] | null;
}
function fromPrincipalPermissions(input?: PrincipalPermissions | null): jsonP.JSONValue {
  if (!input) return input;
  return {
    Principal: fromDataLakePrincipal(input["Principal"]),
    Permissions: input["Permissions"],
  }
}
function toPrincipalPermissions(root: jsonP.JSONValue): PrincipalPermissions {
  return jsonP.readObj({
    required: {},
    optional: {
      "Principal": toDataLakePrincipal,
      "Permissions": [(x: jsonP.JSONValue) => cmnP.readEnum<Permission>(x)],
    },
  }, root);
}

// refs: 2 - tags: output, named, interface
export interface BatchPermissionsFailureEntry {
  RequestEntry?: BatchPermissionsRequestEntry | null;
  Error?: ErrorDetail | null;
}
function toBatchPermissionsFailureEntry(root: jsonP.JSONValue): BatchPermissionsFailureEntry {
  return jsonP.readObj({
    required: {},
    optional: {
      "RequestEntry": toBatchPermissionsRequestEntry,
      "Error": toErrorDetail,
    },
  }, root);
}

// refs: 2 - tags: output, named, interface
export interface ErrorDetail {
  ErrorCode?: string | null;
  ErrorMessage?: string | null;
}
function toErrorDetail(root: jsonP.JSONValue): ErrorDetail {
  return jsonP.readObj({
    required: {},
    optional: {
      "ErrorCode": "s",
      "ErrorMessage": "s",
    },
  }, root);
}

// refs: 2 - tags: output, named, interface
export interface ResourceInfo {
  ResourceArn?: string | null;
  RoleArn?: string | null;
  LastModified?: Date | number | null;
}
function toResourceInfo(root: jsonP.JSONValue): ResourceInfo {
  return jsonP.readObj({
    required: {},
    optional: {
      "ResourceArn": "s",
      "RoleArn": "s",
      "LastModified": "d",
    },
  }, root);
}

// refs: 2 - tags: output, named, interface
export interface PrincipalResourcePermissions {
  Principal?: DataLakePrincipal | null;
  Resource?: Resource | null;
  Permissions?: Permission[] | null;
  PermissionsWithGrantOption?: Permission[] | null;
  AdditionalDetails?: DetailsMap | null;
}
function toPrincipalResourcePermissions(root: jsonP.JSONValue): PrincipalResourcePermissions {
  return jsonP.readObj({
    required: {},
    optional: {
      "Principal": toDataLakePrincipal,
      "Resource": toResource,
      "Permissions": [(x: jsonP.JSONValue) => cmnP.readEnum<Permission>(x)],
      "PermissionsWithGrantOption": [(x: jsonP.JSONValue) => cmnP.readEnum<Permission>(x)],
      "AdditionalDetails": toDetailsMap,
    },
  }, root);
}

// refs: 2 - tags: output, named, interface
export interface DetailsMap {
  ResourceShare?: string[] | null;
}
function toDetailsMap(root: jsonP.JSONValue): DetailsMap {
  return jsonP.readObj({
    required: {},
    optional: {
      "ResourceShare": ["s"],
    },
  }, root);
}
